{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>SUBASH BUILD AND DESIGN</title>
  <link rel="stylesheet" href="{% static 'fontawesome-5.5/css/all.min.css' %}" />
  <link rel="stylesheet" href="{% static 'slick/slick.css' %}">
  <link rel="stylesheet" href="{% static 'slick/slick-theme.css' %}">
  <link rel="stylesheet" href="{% static 'magnific-popup/magnific-popup.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
  <link rel="stylesheet" href="{% static 'css/tooplate-infinite-loop.css' %}" />
</head>

<body>
  <section id="infinite" class="text-white tm-font-big tm-parallax">
    <nav class="navbar navbar-expand-md tm-navbar" id="tmNav">
      <div class="container">
        <a href="#infinite" class="navbar-brand">SUBASH BUILD AND DESIGN</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"><i class="fas fa-bars" style="color:rgba(255,255,255,0.85)"></i></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link tm-nav-link" href="#infinite">Home</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link tm-nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">What We Do</a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="{% url 'interior' %}">Interior Design</a>
                <a class="dropdown-item" href="{% url 'sliding' %}">Sliding Systems</a>
                <a class="dropdown-item" href="{% url 'construction' %}">Construction</a>
              </div>
            </li>
            <li class="nav-item"><a class="nav-link tm-nav-link" href="#testimonials">Testimonials</a></li>
            <li class="nav-item"><a class="nav-link tm-nav-link" href="#gallery">Gallery</a></li>
            <li class="nav-item"><a class="nav-link tm-nav-link" href="#contact">Contact</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- HERO (replaced & aligned) -->
    <div class="tm-hero-text-container" role="banner" aria-label="Hero">
      <div class="tm-hero-text-inner">
        <div style="max-width:820px;">
          <h1 class="tm-hero-title">SUBASH BUILD AND DESIGN</h1>
          <p class="tm-hero-subtitle">SLIDING SYSTEM — CONSTRUCTIONS — INTERIOR SOLUTIONS</p>
        </div>
      </div>
    </div>

    <!-- down arrow -->
    <div class="tm-next tm-intro-next" aria-hidden="false">
      <a href="#whatwedo" class="text-center tm-down-arrow-link" aria-label="Scroll to What We Do">
        <i class="fas fa-2x fa-arrow-down tm-down-arrow" aria-hidden="true"></i>
      </a>
    </div>
  </section>

  <!-- WHAT WE DO (unchanged) -->
  <section id="whatwedo" class="tm-section-pad-top">
    <div class="container">
      <div class="row tm-content-box">
        <div class="col-lg-12 col-xl-12">
          <div class="tm-intro-text-container">
            <h2 class="tm-text-primary mb-4 tm-section-title">What We Do</h2>
            <p class="mb-4 tm-intro-text">
              At <strong>Subash Build and Design</strong>, we craft spaces that balance elegance, functionality, and
              durability.
              With expertise in construction, interior design, and modern furnishing solutions, we provide
              <em>end-to-end services</em> tailored to your lifestyle and business needs.
            </p>
          </div>
        </div>
      </div>

      <div class="row tm-content-box">
        <div class="col-lg-1 col-md-12 text-center"><i class="fas fa-3x fa-building tm-icon"></i></div>
        <div class="col-lg-5">
          <div class="tm-intro-text-container">
            <h2 class="tm-text-primary mb-4">Construction</h2>
            <p class="mb-4 tm-intro-text">We handle both residential and commercial projects with precision and care.
              From foundation to finishing, our team ensures quality, safety, and on-time delivery in every build.</p>
          </div>
        </div>

        <div class="col-lg-1"><i class="fas fa-3x fa-couch text-center tm-icon"></i></div>
        <div class="col-lg-5">
          <div class="tm-intro-text-container">
            <h2 class="tm-text-primary mb-4">Interior Solutions</h2>
            <p class="mb-4 tm-intro-text">Our designs bring life to interiors—modern, elegant, and functional. We
              transform living spaces, offices, and showrooms into inspiring environments tailored to your vision.</p>
          </div>
        </div>
      </div>

      <div class="row tm-content-box">
        <div class="col-lg-1"><i class="fas fa-3x fa-sliders-h text-center tm-icon"></i></div>
        <div class="col-lg-5">
          <div class="tm-intro-text-container">
            <h2 class="tm-text-primary mb-4">Sliding Systems</h2>
            <p class="mb-4 tm-intro-text">We provide sleek and durable sliding systems for wardrobes, doors, and
              partitions. Perfect for modern homes and offices, our solutions save space while adding elegance.</p>
          </div>
        </div>

        <div class="col-lg-1"><i class="fas fa-3x fa-door-closed text-center tm-icon"></i></div>
        <div class="col-lg-5">
          <div class="tm-intro-text-container">
            <h2 class="tm-text-primary mb-4">Sleek Partitions & Wardrobe Doors</h2>
            <p class="mb-4 tm-intro-text">From stylish partitions that redefine spaces to custom wardrobe doors, we
              deliver modern, functional, and aesthetically pleasing solutions for every lifestyle.</p>
            <div class="tm-continue"><a href="#gallery" class="tm-intro-text tm-btn-primary">View Projects</a></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="testimonials" class="tm-section-pad-top tm-parallax-2" aria-label="Testimonials">
    <div class="tm-testimonials-bg" aria-hidden="true"></div>

    <div class="container tm-testimonials-content">
      <div class="row">
        <div class="col-12 text-center tm-content-box">
          <h2 class="text-white mb-3 tm-section-title">Testimonials</h2>
          <p class="mx-auto tm-section-desc text-center" style="max-width:760px;color:rgba(255,255,255,0.92);">
            We believe every home and workspace deserves to be both stylish and practical. See what our clients say.
          </p>

          <!-- carousel wrapper -->
          {% if testimonials %}
          <div class="mx-auto tm-gallery-container tm-gallery-container-2" style="max-width:900px;">
            <div class="tm-testimonials-carousel">
              {% for testimonial in testimonials %}
              <div class="tm-testimonial-item">
                <div class="tm-testimonial-content">
                  <p class="tm-testimonial-text">{{ testimonial.review }}</p>
                  <p class="tm-testimonial-author">- {{ testimonial.name }}</p>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </section>


  <!-- GALLERY (unchanged) -->
  <section id="gallery" class="tm-section-pad-top">
    <div class="container tm-container-gallery">
      <div class="row">
        <div class="text-center col-12">
          <h2 class="tm-text-primary tm-section-title mb-4">Gallery</h2>
          <p class="mx-auto tm-section-desc">"Explore our portfolio to see how we bring design ideas to life. From
            elegant living spaces to functional commercial interiors, each project reflects our commitment to quality,
            creativity, and client satisfaction."</p>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <div class="mx-auto tm-gallery-container">
            <div class="grid tm-gallery">
              {% for image in gallery_images %}
              <a href="{{ image.image.url }}" class="tm-gallery-link">
                <figure class="effect-honey tm-gallery-item">
                  <img src="{{ image.image.url }}" alt="{{ image.title }}" class="img-fluid">
                </figure>
              </a>
              {% empty %}
              <div class="text-center w-100">
                <p>No images available yet.</p>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT (unchanged) -->
  <section id="contact" class="tm-section-pad-top tm-parallax-2">
    <div class="container tm-container-contact">
      <div class="row">
        <div class="text-center col-12">
          <h2 class="tm-section-title mb-4">Contact Us</h2>
          <p class="mb-5">"We'd love to hear from you! Whether you're planning a new construction project, redesigning
            your interiors, or need custom wardrobe and partition solutions, our team is here to help. Get in touch with
            us today."</p><br>
        </div>

        <div class="col-sm-12 col-md-6">
          <form action="{% url 'contact' %}" method="POST">
            {% if messages %}
            {% for message in messages %}
            <div class="alert alert-success mt-3">{{ message }}</div>
            {% endfor %}
            {% endif %}
            {% csrf_token %}
            <input id="name" name="name" type="text" placeholder="Your Name" class="tm-input" required />
            <input id="email" name="email" type="email" placeholder="Your Email" class="tm-input" required />
            <textarea id="message" name="message" rows="8" placeholder="Message" class="tm-input" required></textarea>
            <button type="submit" class="btn tm-btn-submit">Submit</button>
          </form>
        </div>

        <div class="col-sm-12 col-md-6">
          <div class="contact-item">
            <a rel="nofollow" href="mailto:subashbuildanddesignstudio@gmail.com" class="item-link"
              style="display: flex; align-items: center;">
              <i class="far fa-2x fa-envelope mr-4"></i>
              <span class="mb-0">subashbuildanddesignstudio@gmail.com</span>
            </a>
          </div>
          <div class="contact-item m-2">
            <a rel="nofollow" href="#" class="item-link" style="display: flex; align-items: center;">
              <i class="fas fa-2x fa-map-marker-alt mr-4"></i>
              <span class="mb-0" style="text-align: left;">1/15,17 th Street, B -sector, Siva Sakthi Nagar, Annanur,
                Chennai-6000062</span>
            </a>
          </div>
          <div class="contact-item m-2">
            <a rel="nofollow" href="tel:7550180554" class="item-link" style="display: flex; align-items: center;">
              <i class="fas fa-2x fa-phone-square mr-4"></i>
              <span class="mb-0">7550180554</span>
            </a>
          </div>
          <div class="contact-item m-2">
            <a href="https://wa.me/917550180554" target="_blank" class="item-link"
              style="display: flex; align-items: center;">
              <i class="fab fa-2x fa-whatsapp mr-4"></i>
              <span class="mb-0">7550180554</span>
            </a>
          </div>
          <div class="contact-item m-2">
            <a href="https://www.instagram.com/sbdstudio.2026/" target="_blank" class="item-link mr-3"
              style="display: flex; align-items: center;">
              <i class="fab fa-2x fa-instagram mr-4"></i>
              <span class="mb-0">SBS STUDIO</span>
            </a>
          </div>
        </div>
      </div>

    </div>
  </section>
  <footer class="text-center small tm-footer"
    style="background-color: #fff; color: #666; width: 100%; padding-bottom: 10px; text-align: center;">
    <p class="mb-4">Copyright &copy; 2025 SUBASH BUILD AND DESIGN . <a rel="nofollow" href="#"
        style="color: #666;">Designed by upmtechnologies</a></p>
  </footer>

  <!-- SCRIPTS -->
  <script src="{% static 'js/jquery-1.9.1.min.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="{% static 'js/bootstrap.min.js' %}"></script>
  <script src="{% static 'slick/slick.min.js' %}"></script>
  <script src="{% static 'magnific-popup/jquery.magnific-popup.min.js' %}"></script>
  <script src="{% static 'js/easing.min.js' %}"></script>
  <script src="{% static 'js/jquery.singlePageNav.min.js' %}"></script>

  <script>
    /* Minimal, defensive JS for navbar, gallery popup, and slick carousels.
       Safe: avoids optional plugins and nonstandard easings that may be missing. */
    (function ($) {
      $(function () {

        /* NAVBAR scroll class */
        $(window).on('scroll', function () {
          if ($(document).scrollTop() > 120) $('.tm-navbar').addClass('scroll');
          else $('.tm-navbar').removeClass('scroll');
        });

        /* Auto-close mobile menu */
        var $navbarCollapse = $('#navbarSupportedContent');
        $('#tmNav a.nav-link:not(.dropdown-toggle)').on('click', function () {
          $navbarCollapse.removeClass('show');
        });
        $('.dropdown-item').on('click', function () { $navbarCollapse.removeClass('show'); });

        /* Simple smooth scroll for in-page links (no external easing required) */
        $("a[href^='#']").on('click', function (event) {
          var target = this.hash;
          if (target) {
            event.preventDefault();
            var $targetEl = $(target);
            if ($targetEl.length) {
              $('html, body').animate({ scrollTop: $targetEl.offset().top }, 600);
            }
          }
        });

        /* Magnific Popup (gallery) - defensive init */
        try {
          if ($.fn.magnificPopup && $('.tm-gallery').length) {
            $('.tm-gallery').magnificPopup({
              delegate: 'a.tm-gallery-link',
              type: 'image',
              gallery: { enabled: true, navigateByImgClick: true, preload: [0, 1] },
              image: { titleSrc: function (item) { return item.el.find('img').attr('alt'); } }
            });
          }
        } catch (e) { console.warn('Magnific init error', e); }

        /* Safe Slick init helper */
        function safeInitSlick($el, opts) {
          if (!$el || !$el.length) return;
          try {
            if ($el.hasClass('slick-initialized')) {
              $el.slick('unslick');
            }
          } catch (e) { /* ignore unslick errors */ }

          try {
            $el.not('.slick-initialized').slick(opts);
          } catch (e) {
            console.warn('Slick init failed for', $el, e);
          }
        }

        /* Gallery carousel (original behavior) */
        safeInitSlick($('.tm-gallery'), {
          dots: false,
          arrows: true,
          infinite: true,
          autoplay: true,
          autoplaySpeed: 3000,
          slidesToShow: 5,
          slidesToScroll: 1,
          responsive: [
            { breakpoint: 1199, settings: { slidesToShow: 4 } },
            { breakpoint: 991, settings: { slidesToShow: 3 } },
            { breakpoint: 767, settings: { slidesToShow: 2, arrows: false } },
            { breakpoint: 480, settings: { slidesToShow: 1, arrows: false } }
          ]
        });

        /* Testimonials carousel — stable config */
        safeInitSlick($('.tm-testimonials-carousel'), {
          slidesToShow: 1,
          slidesToScroll: 1,
          infinite: true,
          centerMode: false,
          adaptiveHeight: true,
          dots: true,
          arrows: true,
          autoplay: true,
          autoplaySpeed: 4200,
          pauseOnHover: true,
          swipeToSlide: true,
          prevArrow: '<button type="button" class="slick-prev"><i class="fas fa-chevron-left"></i></button>',
          nextArrow: '<button type="button" class="slick-next"><i class="fas fa-chevron-right"></i></button>',
          responsive: [
            { breakpoint: 992, settings: { slidesToShow: 1 } },
            { breakpoint: 767, settings: { slidesToShow: 1, arrows: false, dots: true } },
            { breakpoint: 480, settings: { slidesToShow: 1, arrows: false, dots: true } }
          ]
        });

        /* After load / resize, ensure Slick recalcs layout */
        $(window).on('load resize orientationchange', function () {
          try {
            if ($('.tm-gallery').hasClass('slick-initialized')) $('.tm-gallery').slick('setPosition');
            if ($('.tm-testimonials-carousel').hasClass('slick-initialized')) $('.tm-testimonials-carousel').slick('setPosition');
          } catch (e) { }
        });

        /* Small delayed re-check in case resources were slow */
        setTimeout(function () {
          try {
            if ($('.tm-gallery').hasClass('slick-initialized')) $('.tm-gallery').slick('setPosition');
            if ($('.tm-testimonials-carousel').hasClass('slick-initialized')) $('.tm-testimonials-carousel').slick('setPosition');
          } catch (e) { }
        }, 250);

        // Testimonials: show exactly one slide, no partial neighbors
        if ($('.tm-testimonials-carousel').length && !$('.tm-testimonials-carousel').hasClass('slick-initialized')) {
          $('.tm-testimonials-carousel').slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            centerMode: false,
            variableWidth: false,
            adaptiveHeight: true,
            dots: true,
            arrows: true,
            autoplay: true,
            autoplaySpeed: 4200,
            prevArrow: '<button type="button" class="slick-prev"><i class="fas fa-chevron-left"></i></button>',
            nextArrow: '<button type="button" class="slick-next"><i class="fas fa-chevron-right"></i></button>',
          });
        }
      }); // doc ready
    })(jQuery);
  </script>

  <!-- (If you still use background parallax code, keep it below / above as before.) -->

</body>

</html>